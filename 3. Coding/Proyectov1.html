<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ingreso y Visualización de Datos</title>

    <!-- Estilos CSS -->
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }

        h2 {
            text-align: center;
        }

        form {
            display: grid;
            gap: 10px;
            justify-content: center;
            max-width: 400px;
            margin: auto;
        }

        table {
            margin-top: 20px;
            margin-bottom: 20px;
            border-collapse: collapse;
            width: 80%;
            margin-left: auto;
            margin-right: auto;
        }

        table, th, td {
            border: 1px solid black;
            text-align: center;
        }

        th, td {
            padding: 10px;
        }
    </style>
</head>
<body>

    <!-- Encabezado -->
    <h2>Ingrese los datos de la acción:</h2>

    <!-- Formulario -->
    <form id="miFormulario">
        <!-- Campos del formulario -->
        <label for="nombreAccion">Nombre de la Acción:</label>
        <input type="text" id="nombreAccion" name="nombreAccion" required>

        <label for="fechaCompra">Fecha de Compra:</label>
        <input type="date" id="fechaCompra" name="fechaCompra" required>

        <label for="precioPorAccion">Precio de Compra por Acción:</label>
        <input type="number" id="precioPorAccion" name="precioPorAccion" step="0.01" required pattern="[0-9]+(\.[0-9]+)?" title="Ingrese un número válido" oninput="validarNumeroPositivo(this)">

        <label for="cantidadAcciones">Cantidad de Acciones:</label>
        <input type="number" id="cantidadAcciones" name="cantidadAcciones" step="1" required pattern="[0-9]+" title="Ingrese un número entero válido" oninput="validarNumeroPositivo(this)">

        <!-- Botón para agregar a la Tabla -->
        <input type="button" value="Agregar a la Tabla" onclick="agregarAccion()">
    </form>

    <!-- Tabla de Datos -->
    <table border="1" id="tablaDatos">
        <tr>
            <!-- Encabezados de la tabla -->
            <th>Nombre de la Acción</th>
            <th>Fecha de Compra</th>
            <th>Precio por Acción</th>
            <th>Cantidad de Acciones</th>
            <th>Costo Total de Compra</th>
        </tr>
    </table>

    <!-- Script JavaScript -->
    <script>
        // Clase para representar una acción
        class Accion {
            constructor(nombre, fecha, precioPorAccion, cantidadAcciones, costoTotalCompra) {
                // Inicialización de propiedades de la acción
                this.nombreAccion = nombre;
                this.fecha = fecha;
                this.precioPorAccion = precioPorAccion;
                this.cantidadAcciones = cantidadAcciones;
                this.costoTotalCompra = costoTotalCompra;
            }

            // Método para crear una fila HTML con los datos de la acción
            crearAccionHTML() {
                const nuevaFila = document.createElement('tr');
                const celdas = [
                    this.nombreAccion,
                    this.fecha,
                    this.precioPorAccion.toFixed(2),
                    this.cantidadAcciones,
                    this.costoTotalCompra.toFixed(2)
                ];

                // Crear celdas HTML y agregarlas a la fila
                celdas.forEach((valor) => {
                    const celda = document.createElement('td');
                    celda.innerHTML = valor;
                    nuevaFila.appendChild(celda);
                });

                return nuevaFila;
            }
        }

        // Función para agregar una acción a la tabla
        function agregarAccion() {
            // Obtener valores del formulario
            const nombreAccion = document.getElementById('nombreAccion').value;
            const fechaCompra = document.getElementById('fechaCompra').value;
            const precioPorAccion = parseFloat(document.getElementById('precioPorAccion').value);
            const cantidadAcciones = parseInt(document.getElementById('cantidadAcciones').value);

            // Verificar si los campos están vacíos o contienen datos no válidos
            if (!nombreAccion || !fechaCompra || isNaN(precioPorAccion) || isNaN(cantidadAcciones)) {
                alert('Por favor, complete todos los campos antes de agregar a la tabla.');
                return;
            }

            // Calcular el costo total de la compra
            const costoTotalCompra = precioPorAccion * cantidadAcciones;

            // Crear una nueva instancia de la clase Accion
            const nuevaFila = new Accion(nombreAccion, fechaCompra, precioPorAccion, cantidadAcciones, costoTotalCompra);

            // Obtener la tabla y agregar la nueva fila
            const tabla = document.getElementById('tablaDatos');
            tabla.appendChild(nuevaFila.crearAccionHTML());

            // Limpiar campos del formulario después de agregar a la tabla
            document.getElementById('nombreAccion').value = '';
            document.getElementById('fechaCompra').value = '';
            document.getElementById('precioPorAccion').value = '';
            document.getElementById('cantidadAcciones').value = '';
        }

    function validarNumeroPositivo(input) {
        const valor = parseFloat(input.value);
        if (isNaN(valor) || valor < 0) {
        alert('Por favor, ingrese un número positivo.');
        input.value = '';  // Limpiar el campo
        }
    }
    </script>
    
</body>
</html>
